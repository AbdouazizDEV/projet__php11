<?php
    function list_presence(){

        $presences=[
            [
                "matricule"=>"P6_DEVWEB_2024_001",
                "nom"=>"wolf",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"devweb",
                "heure_arrivee"=>"09:00",
                "statut"=>"Present"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Diouf",
                "prenom"=>"thierno",
                "telephone"=>"123456789",
                "referentiel"=>"devWeb",
                "heure_arrivee"=>"09:00",
                "statut"=>"Present"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"dione",
                "prenom"=>"habi",
                "telephone"=>"123456789",
                "referentiel"=>"developpement_data",
                "heure_arrivee"=>"08:00",
                "statut"=>"Present"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"sylla",
                "prenom"=>"Binta ",
                "telephone"=>"123456789",
                "referentiel"=>"reference_digital",
                "heure_arrivee"=>"09:00",
                "statut"=>"Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ], [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_004",
                "nom" => "Sylla",
                "prenom" => "Mamadou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_005",
                "nom" => "Fall",
                "prenom" => "A√Øcha",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],[
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"reference_digital",
                "heure_arrivee"=>"19:00",
                "statut"=>"Absent"
            ], [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_004",
                "nom" => "Sylla",
                "prenom" => "Mamadou",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_005",
                "nom" => "Fall",
                "prenom" => "A√Øcha",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ], 
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"reference_digital",
                "heure_arrivee"=>"19:00",
                "statut"=>"Absent"
            ],[
                "matricule"=>"P6_DEVWEB_2024_001",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"reference_digital",
                "heure_arrivee"=>"09:00",
                "statut"=>"Absent"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"reference_digital",
                "heure_arrivee"=>"09:00",
                "statut"=>"Absent"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"devweb",
                "heure_arrivee"=>"08:00",
                "statut"=>"Present"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"devweb",
                "heure_arrivee"=>"09:00",
                "statut"=>"Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ], [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "devweb",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_004",
                "nom" => "Sylla",
                "prenom" => "Mamadou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_005",
                "nom" => "Fall",
                "prenom" => "A√Øcha",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Present"
            ],
            [
                "matricule"=>"P6_DEVWEB_2024_002",
                "nom"=>"Doe",
                "prenom"=>"John",
                "telephone"=>"123456789",
                "referentiel"=>"developpement_data",
                "heure_arrivee"=>"19:00",
                "statut"=>"Absent"
            ],
             [
                "matricule" => "P6_DEVWEB_2024_001",
                "nom" => "Diop",
                "prenom" => "Fatou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_002",
                "nom" => "Sow",
                "prenom" => "Oumar",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_003",
                "nom" => "Ndiaye",
                "prenom" => "A√Øssatou",
                "telephone" => "123456789",
                "referentiel" => "developpement_data",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ],
            [
                "matricule" => "P6_DEVWEB_2024_004",
                "nom" => "Sylla",
                "prenom" => "Mamadou",
                "telephone" => "123456789",
                "referentiel" => "reference_digital",
                "heure_arrivee" => "09:00",
                "statut" => "Absent"
            ]
        ];
        return $presences;
    }
?>
<?php
       function filtre_de_Presence($statut = 'present', $referentiel = 'reference digital')
        {
            $liste = list_presence();
            $resultat = [];
            if ($statut =='present' && $referentiel=='reference digital') {
                return $liste;
            }

            foreach ($liste as $etudiant) {
                // V√©rifier le statut et le r√©f√©rentiel de chaque √©tudiant
                if ($etudiant['statut'] == $statut && $etudiant['referentiel'] == $referentiel) {
                    $resultat[] = $etudiant; // Ajouter l'√©tudiant au r√©sultat
                }
            }
            return $resultat;
        }
?>
<?php 
    function afficher_etudiants() {
        // R√©cup√©rer les valeurs des menus d√©roulants
        $statut = $_POST['etat'] ?? 'present';
        $referentiel = $_POST['reference'] ?? 'reference digital';
    
        // Appeler la fonction pour filtrer les √©tudiants
        $liste_filtree = filtre_de_Presence($statut, $referentiel);
    
        // Nombre d'√©l√©ments par page
        $elementsParPage = 4;
        // Page actuelle (par d√©faut √† la premi√®re page)
        $block = isset($_GET['block']) ? $_GET['block'] : 1;
        // Calcul du nombre total de pages
        $totalPages = ceil(count($liste_filtree) / $elementsParPage);
    
        // D√©termination de l'indice de d√©but et de fin pour la page actuelle
        $debut = ($block - 1) * $elementsParPage;
        $fin = $debut + $elementsParPage;
        $pagin = array_slice($liste_filtree, $debut, $elementsParPage);
    
        // Affichage de la liste des √©tudiants
        echo '<table class="table">';
        echo '<thead>';
        echo '<tr>';
        echo '<th>Image</th>';
        echo '<th>Nom</th>';
        echo '<th>Pr√©nom</th>';
        echo '<th>Email</th>';
        echo '<th>Genre</th>';
        echo '<th>T√©l√©phone</th>';
        echo '<th>Actions</th>';
        echo '</tr>';
        echo '</thead>';
        echo '<tbody>';
    
        foreach ($pagin as $etudiant) {
            echo '<tr>';
            echo '<td><p style="font-size: xx-large;">üßëüèæ</p></td>';
            echo '<td>' . $etudiant['nom'] . '</td>';
            echo '<td>' . $etudiant['prenom'] . '</td>';
            echo '<td>' . $etudiant['email'] . '</td>';
            echo '<td>' . $etudiant['genre'] . '</td>';
            echo '<td>' . $etudiant['telephone'] . '</td>';
            echo '<td><a href="modifier.php?id=' . $etudiant['id'] . '">Modifier</a> | <a href="supprimer.php?id=' . $etudiant['id'] . '">Supprimer</a></td>';
            echo '</tr>';
        }
    
        echo '</tbody>';
        echo '</table>';
    
        // Affichage de la pagination
        echo '<nav aria-label="Page navigation example">';
        echo '<ul class="pagination">';
    
        if ($block > 1) {
            echo '<li class="page-item"><a class="page-link" href="?block=' . ($block - 1) . '">Pr√©c√©dent</a></li>';
        }
    
        for ($i = 1; $i <= $totalPages; $i++) {
            if ($i == $block) {
                echo '<li class="page-item active"><a class="page-link" href="?block=' . $i . '">' . $i . '</a></li>';
            } else {
                echo '<li class="page-item"><a class="page-link" href="?block=' . $i . '">' . $i . '</a></li>';
            }
        }
    
        if ($block < $totalPages) {
            echo '<li class="page-item"><a class="page-link" href="?block=' . ($block + 1) . '">Suivant</a></li>';
        }
    
        echo '</ul>';
        echo '</nav>';
    }
?>    